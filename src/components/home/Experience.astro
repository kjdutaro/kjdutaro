---
/**
 * Experience â€” timeline of work history with pixel connector dots.
 * Entries from experience content collection, sorted most recent first.
 */
import { getCollection } from "astro:content";
import ExperienceCard from "../ui/ExperienceCard.astro";

const experiences = await getCollection("experience");
const sorted = experiences.sort((a, b) => {
  const aDate = a.data.endDate || new Date();
  const bDate = b.data.endDate || new Date();
  return new Date(bDate).getTime() - new Date(aDate).getTime();
});
---

<section id="experience" aria-label="Experience" class="c-section">
  <div class="c-container">
    <p class="c-section-eyebrow">Career</p>
    <h2 class="c-section-title">Experience</h2>
    <p class="c-section-desc">My professional journey so far.</p>

    <div class="max-w-3xl space-y-0">
      {
        sorted.map((exp) => (
          <ExperienceCard
            title={exp.data.title}
            company={exp.data.company}
            startDate={exp.data.startDate}
            endDate={exp.data.endDate}
            description={exp.data.description}
            current={exp.data.current}
          />
        ))
      }
    </div>
  </div>
</section>
