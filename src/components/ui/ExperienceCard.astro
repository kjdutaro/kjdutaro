---
/**
 * ExperienceCard — timeline card with pixel-art connector dots.
 * Sharp pixel border left, square timeline dots.
 */
interface Props {
  title: string;
  company: string;
  startDate: Date;
  endDate?: Date;
  description: string;
  current?: boolean;
}

const { title, company, startDate, endDate, description, current = false } = Astro.props;

const formatDate = (date: Date) => {
  return new Date(date).toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
};
---

<div class="border-l-2 border-[var(--accent)] pl-6 pb-8 relative">
  <!-- Pixel square dot instead of circle -->
  <div class="absolute -left-[7px] top-0 w-3 h-3 bg-[var(--accent)] ring-4 ring-[var(--bg-primary)]" aria-hidden="true"></div>

  <div class="flex flex-col gap-2">
    <div class="flex items-baseline gap-4 flex-wrap">
      <h3 class="font-heading text-lg font-semibold text-[var(--text-primary)]">{title}</h3>
      <p class="font-mono text-xs text-[var(--text-muted)]">{company}</p>
      {current && (
        <span class="font-mono text-xs px-2 py-0.5 bg-[var(--accent-muted)] text-[var(--accent)] border border-[var(--accent)]">
          Current
        </span>
      )}
    </div>

    <p class="font-mono text-xs text-[var(--text-subtle)]">
      {formatDate(startDate)} – {endDate ? formatDate(endDate) : 'Present'}
    </p>

    <p class="text-[var(--text-muted)] mt-2 leading-relaxed text-sm">{description}</p>
  </div>
</div>
